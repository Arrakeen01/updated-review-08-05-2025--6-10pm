# SPARK Mobile Upload - Netlify Deployment

This is a standalone mobile upload web application designed to be deployed on Netlify. It provides a secure file upload interface for mobile users accessing via QR codes generated by the SPARK system.

## Features

- 📱 Mobile-optimized file upload interface
- 📂 Drag & drop file upload with visual feedback
- 🔒 Secure session-based access
- 📄 Support for multiple file types (JPEG, PNG, PDF)
- 📊 Upload progress tracking and results
- 🎨 Modern UI matching SPARK design
- ⚡ Fast and lightweight
- 🌐 Works on all modern mobile browsers

## How It Works

1. **PC User**: Generates QR code in SPARK system using GoQR.me API
2. **QR Code**: Points to `https://qr-code-0123.netlify.app?session=SESSION_ID`
3. **Mobile User**: Visits the Netlify URL via QR code scan
4. **Upload**: Selects/drags files and uploads them securely
5. **Real-time**: Files appear instantly on the PC interface

## Deployment Instructions

### Option 1: Deploy to Netlify (Recommended)

1. **Prepare the files:**
   - Copy this entire `qr-scanner-netlify` folder
   - Zip the contents (not the folder itself, just the files inside)

2. **Deploy to Netlify:**
   - Go to [netlify.com](https://netlify.com)
   - Sign up/login to your account
   - Click "Add new site" > "Deploy manually"
   - Drag and drop the zip file or select files
   - Your site will be deployed with a URL like `https://qr-code-0123.netlify.app`

3. **Update the SPARK system:**
   - The QR codes in your SPARK system now use GoQR.me API
   - They automatically point to `https://qr-code-0123.netlify.app`
   - No additional configuration needed!

### Option 2: Deploy to Any Static Host

This mobile upload app can be deployed to any static hosting service:
- GitHub Pages
- Vercel
- Firebase Hosting
- AWS S3 + CloudFront
- Any web server

Simply upload the files and update the QR code generation URL in your SPARK system.

## Configuration

### QR Code Generation (Already Updated)

The SPARK system now uses the GoQR.me API for QR code generation:

```javascript
// In QRUpload.tsx (already implemented)
const qrScannerUrl = `https://qr-code-0123.netlify.app?session=${sessionId}`;
const goQRApiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=256x256&format=png&data=${encodeURIComponent(qrScannerUrl)}`;
```

### URL Structure

The mobile upload app expects URLs with this format:
```
https://qr-code-0123.netlify.app?session=SESSION_ID_HERE
```

When files are uploaded, they are processed by your SPARK backend and appear instantly on the PC interface via real-time sync.

## File Upload Features

### Supported File Types
- ✅ JPEG Images (.jpg, .jpeg)
- ✅ PNG Images (.png)
- ✅ PDF Documents (.pdf)

### File Size Limits
- Maximum 10MB per file
- Multiple files can be uploaded simultaneously

### Upload Methods
1. **Drag & Drop**: Drag files directly onto the upload zone
2. **Click to Browse**: Click the upload zone to open file picker
3. **Multiple Selection**: Select multiple files at once

## Security Features

- Session-based access validation
- File type and size validation
- HTTPS required for secure transmission
- Session expiration for security
- No data stored locally on mobile device

## Browser Support

- ✅ Chrome for Android
- ✅ Safari for iOS  
- ✅ Firefox Mobile
- ✅ Edge Mobile
- ✅ Samsung Internet

## Troubleshooting

### Upload Not Working
- Ensure stable internet connection
- Check file types are supported (JPEG, PNG, PDF)
- Verify file sizes are under 10MB
- Try refreshing the page

### Session Invalid
- QR code may have expired (24-hour limit)
- Generate a new QR code from SPARK system
- Ensure QR code was scanned correctly

### Files Not Appearing on PC
- Check real-time connection in SPARK system
- Verify Supabase integration is working
- Try refreshing the PC interface manually

## File Structure

```
qr-scanner-netlify/
├── index.html          # Main mobile upload application
├── README.md          # This documentation
└── .gitignore         # Git ignore file (optional)
```

## Integration with SPARK System

This mobile upload app integrates seamlessly with your SPARK system:

1. **QR Generation**: SPARK uses GoQR.me API to create codes pointing to this app
2. **Session Management**: Sessions created in SPARK are validated here
3. **File Processing**: Uploaded files are processed by SPARK's HuggingFace integration
4. **Real-time Sync**: Files appear instantly on PC via Supabase real-time subscriptions

## Development Notes

### Backend Integration

In production, replace the `simulateUpload` function with actual backend integration:

```javascript
async uploadToBackend(file, sessionId) {
    const formData = new FormData();
    formData.append('file', file);
    formData.append('sessionId', sessionId);
    
    const response = await fetch('YOUR_SPARK_UPLOAD_ENDPOINT', {
        method: 'POST',
        body: formData
    });
    
    if (!response.ok) throw new Error('Upload failed');
    return await response.json();
}
```

### Session Validation

Currently uses basic client-side validation. For production, add server-side validation:

```javascript
async validateSession(sessionId) {
    const response = await fetch(`YOUR_API/validate-session/${sessionId}`);
    return response.ok;
}
```

## Support

For issues related to:
- **Mobile upload functionality**: Check browser console for errors
- **Deployment**: Refer to your hosting provider's documentation  
- **Integration**: Ensure SPARK system QR codes point to correct URL
- **File processing**: Check SPARK backend and HuggingFace integration